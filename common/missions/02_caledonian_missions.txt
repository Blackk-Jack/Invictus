01_caledonian_missions = {
    header = mssion_gaul
    icon = cde_gallic_tribe_negotiation

    repeatable = no
    chance = 1000

    potential = {
        NOT = { has_variable = mission_cooldown_var }
		primary_culture = caledonian
    }

    abort = {
		ai_mission_back_out_trigger = yes
	}
    on_start = {
        start_mission_ai_effect = yes
    }
    on_abort = {
        custom_tooltip = general_mission_cooldown_tt
        set_variable = {
            name = mission_cooldown_var
            days = 7300
        }
    }
    on_completion = {
        complete_mission_effect = yes
        capital_scope = {
            capital_formable_small_effect = yes
        }
    }
    
    01_caledonian_missions_task_1 = { #We Are In Agreement
        icon = "task_expansion"
        duration = 90

        highlight = {
			scope:province = {
				is_in_area = caledonia_septentrionalis_area
			}
		}

        allow = {
            custom_tooltip = {
                text = 01_sw_britain_dum_6_task_tt
                any_character = {
                    count >= 2
                    is_clan_chief = yes
                    loyalty >= 70
                }
            }
            stability >= 50
        }

        on_completion = {
            area:caledonia_septentrionalis_area = {
				add_provincial_claim_effect = yes
			}
            trigger_event = me_caledonian.1
            show_as_tooltip = {
            }
        }
    }

    01_caledonian_missions_task_2 = { #Then It Must Be War
        icon = "task_battle"
        duration = 90

        highlight = {
			scope:province = {
				is_in_area = caledonia_occidentalis_area
			}
		}

        allow = {
           political_influence >= 15
        }

        on_completion = {
            add_political_influence = -15
            area:caledonia_occidentalis_area = {
				add_provincial_claim_effect = yes
			}
            trigger_event = me_caledonian.2
            show_as_tooltip = {
            }
        }
    }

    01_caledonian_missions_task_3 = { #Pictish Mines
        requires = {01_caledonian_missions_task_1}
        icon = "task_economical"
        duration = 180

        highlight = {
        	scope:province = {
        		has_minable_trade_good_trigger = yes
        		owner = root
        	}
        }

        allow = {
            invention = commerce_inv_1
            any_owned_province = {
        		num_of_slave_mine_building = 1
                count >= 2
        	}
        }

        on_completion = {
            add_centralization = 5
            add_country_modifier = {
                name = pictish_mines_modifier
                duration = -1
            }
            trigger_event = me_caledonian.3
            show_as_tooltip = {
            }
        }
    }
    01_caledonian_missions_task_4 = { #
        icon = "task_diplomatic"
        requires = {01_caledonian_missions_task_1}
        duration = 90

        highlight = {
			scope:province = {
				is_in_area = caledonia_septentrionalis_area
			}
		}

        allow = {
           owns_area = caledonia_septentrionalis_area
        }

        on_completion = {
            area:caledonia_meridionalis_area = {
				add_provincial_claim_effect = yes
			}                
            trigger_event = me_caledonian.4

            show_as_tooltip = {
            }
        }
    }
    01_caledonian_missions_task_5 = { #Crossing The Mare Hibernicum 
        icon = "task_religion"
        requires = {01_caledonian_missions_task_4}

        highlight = {
            scope:province = {
                OR = {
                    is_in_area = caledonia_meridionalis_area
                    this = root.capital_scope 
                }
            }
        }

        allow = {
            capital_scope = {
                is_importing_trade_good = wood 
            }
            num_of_ships >= 10
            owns_area = caledonia_meridionalis_area
        }
        on_completion = {
            add_political_influence = 25
            area:hibernia_occidentalis_area = {
				add_provincial_claim_effect = yes
			}
            trigger_event = me_caledonian.5

        }
    }
    01_caledonian_missions_task_6 = { #Pictish Raiders
        icon = "task_conquest"
        requires = {01_caledonian_missions_task_5 01_caledonian_missions_task_10}

        allow = {
            trigger_if = {
                limit = {
                    is_tribal = yes
                }
                has_country_modifier = assemble_raiding_party_button_modifier
            }
            capital_scope = {
                is_importing_trade_good = woad
            }
        }
        on_completion = {
            create_unit = {
                navy = no
                name = "Pictish Raiders"
                location = capital_scope
                hidden_effect = {
                add_subunit = light_infantry
                add_subunit = light_infantry
                add_subunit = light_cavalry
                add_subunit = light_cavalry                                                
                add_food = 100
                add_morale = 2
                }
            }
            add_country_modifier = {
                name = pictish_raiders_mod
                duration = 3650
            }
            trigger_event = me_caledonian.6
            show_as_tooltip = {

            }
        }
    }
    01_caledonian_missions_task_7 = { #
        icon = "task_expansion"
        requires = { 01_caledonian_missions_task_11 }

        highlight = {
			scope:province = {
				OR = {
					province_id = 467	
                    province_id = 64			
				}
			}
		}

        allow = {
           
        }
        on_completion = {
            trigger_event = me_caledonian.7
            show_as_tooltip = {

            }
        }
    }
    01_caledonian_missions_task_8 = { #Tribal Settlers
        icon = "task_conquest"
        duration = 90
        requires = {01_caledonian_missions_task_2}

        highlight = {
			scope:province = {
				is_in_area = caledonia_occidentalis_area
			}
		}

        allow = {
            owns_area = caledonia_occidentalis_area
        }

        on_completion = {
            add_country_modifier = {
                name = caledonian_cheaper_slaves_cost 
                duration = 3650
            }
            capital_scope = {
                create_state_pop = tribesmen
                create_state_pop = slaves
                create_state_pop = slaves
            }
            trigger_event = me_caledonian.8
            show_as_tooltip = {

            }
        }
    }
    01_caledonian_missions_task_9 = { #Caledonian Mines
        requires = {01_caledonian_missions_task_8}
        duration = 365
        icon = "task_calm"

		highlight = {
			scope:province = {
				is_in_area = caledonia_occidentalis_area
			}
		}

        allow = {
            custom_tooltip = {
                text = caledonia_mission_tree_task_9_tt
                any_owned_province = {
                   count >= 3
                   OR = {
                    is_in_area = caledonia_occidentalis_area
                   }
                   trade_goods = base_metals
                   trade_goods = stone
                   has_building = slave_mine_building
               }
           }
        }
            
        on_completion = {
            add_centralization = 5
            add_country_modifier = {
                name = caledonian_stoneworks
                duration = -1
            }
            add_country_modifier = {
				name = "iron_weapons_caledonia"
				duration = 1835
			}
            trigger_event = me_caledonian.9
            show_as_tooltip = {

            }
        }
    }
    01_caledonian_missions_task_10 = { #Highland Hunting
        icon = "task_political"
        requires = {01_caledonian_missions_task_4}
        duration = 365
        allow = {
           
        }
        on_completion = {
            trigger_event = zorgo_event.101
            show_as_tooltip = {

            }
        }
    }
    01_caledonian_missions_task_11 = { #Salt Mines of Novantae
        requires = {01_caledonian_missions_task_10 01_caledonian_missions_task_12}
        icon = "task_economical"

        highlight = {
			scope:province = {
				OR = {
                    province_id = 2109
				}
			}
        }

        allow = {
            hidden:p:2109 = {
				has_building = slave_mine_building
			}
        }
        on_completion = {
            add_centralization = 5
			p:2002 = {
				add_province_modifier = {
					name = dumnonian_tin_mines_mod
					duration = -1
				}
			}
            trigger_event = me_caledonian.11
            show_as_tooltip = {

            }
        }
    }
    01_caledonian_missions_task_12 = { #Trading This For That
        icon = "task_economical"
        requires = {01_caledonian_missions_task_8}
        duration = 90
        allow = {
            has_law = barter_economy_law
            treasury >= 40
            political_influence >= 15
        }
        on_completion = {
            add_treasury = -40
            add_political_influence = -15
            capital_scope = {
                add_province_modifier = {
                    name = caledonian_marketplaces
                    duration = -1
                }
            }
            trigger_event = me_caledonian.12
            show_as_tooltip = {

            }
        }
    }
    01_caledonian_missions_task_13 = { #A Caledonian City
        icon = "task_diplomatic"
        requires = {01_caledonian_missions_task_9 01_caledonian_missions_task_12}
        duration = 365

        highlight = {
            scope:province = {
                owner = root
                is_capital = yes
            }
        }

        allow = {
            has_law = absolute_authority
            capital_scope = {
                total_population >= 15
            }
            hidden:capital_scope.state = {
                calc_true_if = {
                    amount >= 1
                    state_improvement_military_trigger = yes
                    state_improvement_civic_trigger = yes
                    state_improvement_oratory_trigger = yes
                    state_improvement_religious_trigger = yes
                }
            }
        }
        on_completion = {
            capital_scope = {
                set_city_status = city
                create_state_pop = freemen
                create_state_pop = citizen
            }
            trigger_event = me_caledonian.13
            show_as_tooltip = {

            }
        }
    }
    01_caledonian_missions_task_14 = { #A Question Of Honor
        icon = "task_expansion"
        requires = {01_caledonian_missions_task_3}

        allow = {
            political_influence >= 20
            custom_tooltip = {
                text = bravest_belgae_ruler_duel_tt
            current_ruler = { 
                has_variable = ruler_challenged_duel_recently
            }
        }
    }
        on_completion = {
            current_ruler = {
				add_charisma = 1
                add_zeal = 1
                add_martial = 1
                add_popularity = 20
			}
            trigger_event = me_caledonian.14
            show_as_tooltip = {
                
            }
        }
    }

    01_caledonian_missions_task_15 = {
        requires = {01_caledonian_missions_task_6 01_caledonian_missions_task_11 }
        icon = "task_atlas"
        final = yes

        highlight = {
			scope:province = {
				OR = {
					province_id = 80
                    province_id = 72			
				}
			}
		}

        allow = {
           
        }


        on_completion = {
            trigger_event = me_caledonian.15
			}
        }
    
    01_caledonian_missions_task_16 = { #
        icon = "task_battle"
        requires = {01_caledonian_missions_task_12}
        allow = {
            
        }
        on_completion = {
            trigger_event = me_caledonian.16
        }
    }

    01_caledonian_missions_task_17 = { #Renowned Fish Exporters - Fishing For Fishies
        icon = "task_economical"
        requires = {01_caledonian_missions_task_9}

        highlight = {
            scope:province = {
                OR = {
                    province_id = 2131
                    province_id = 2128
                    province_id = 2129
                    this = root.capital_scope 
                }
            }
        }

        allow = {
            p:2131 = {
        		num_of_basic_settlement_infratructure_building >= 1
				total_population >= 10
        	}
            p:2128 = {
        		num_of_basic_settlement_infratructure_building >= 1
				total_population >= 10
        	}
            p:2129 = {
        		num_of_basic_settlement_infratructure_building >= 1
				total_population >= 10
        	}
			capital_scope = {
				num_of_port_building >= 1
			}
            }

        on_completion = {
            p:2131 = {
				add_province_modifier = {
					name = fisheries_of_caledonia
					duration = -1
				}
			}
            p:2128 = {
				add_province_modifier = {
					name = fisheries_of_caledonia
					duration = -1
				}
			}
            p:2129 = {
				add_province_modifier = {
					name = fisheries_of_caledonia
					duration = -1
				}
			}
            add_country_modifier = {
                name = caledonia_fish_trade_mod
                duration = -1
            }
            trigger_event = me_caledonian.17
            show_as_tooltip = {
            }
        }
    }
   
    01_caledonian_missions_task_18 = { #
        icon = "task_battle"
        duration = 365
        requires = {01_caledonian_missions_task_10}
        
        allow = {
            
    }
        on_completion = {
            trigger_event = me_caledonian.18

            show_as_tooltip = {
            }
        }
    }

    01_caledonian_missions_task_19 = { #
        icon = "task_economical"
        duration = 730
        requires = {01_caledonian_missions_task_18}

        highlight = {
			scope:province = {
				OR = {
					province_id = 266
                    province_id = 1830	
                    province_id = 8015			
				}
			}
		}
        

        allow = {
            
        }
        on_completion = {
            trigger_event = me_caledonian.19
            show_as_tooltip = {
            }
        }
    }

    01_caledonian_missions_task_20 = { #
    icon = "task_conquest"
    duration = 730
    requires = {01_caledonian_missions_task_6 }
    
    allow = {
       
    }
    on_completion = {
        trigger_event = me_caledonian.20
        show_as_tooltip = {
        }
    }
}

01_caledonian_missions_task_21 = { #The Painted City
    icon = "task_apollo"
    duration = 365
    requires = {01_caledonian_missions_task_3}

    highlight = {
        scope:province = {
            owner = root
            is_capital = yes
        }
    }
    
    allow = {
        treasury >= 75
        political_influence >= 25 
        capital_scope = {
            is_importing_trade_good = base_metals
            is_importing_trade_good = stone
            total_population >= 15
        }
        
    }
    on_completion = {
        add_treasury = -75
        add_political_influence = -25
        random_owned_province = {
            limit = { is_coastal = yes }
            save_scope_as = pictish_city_province
        }
        scope:pictish_city_province = {
            set_city_status = city
        }
        trigger_event = me_caledonian.24
        show_as_tooltip = {
        }
    }
}

01_caledonian_missions_task_22 = { #
    icon = "task_expansion"
    duration = 730
    requires = {01_caledonian_missions_task_21 }
    
    allow = {
       
    }
    on_completion = {
        trigger_event = me_caledonian.26
        show_as_tooltip = {
        }
    }
}
}