getae_mission_01_inv = {
	icon = carthage_4
	header = german_mission1

	repeatable = no

	chance = {
		factor = 10
	}

	ai_chance = { factor = 10 }

	potential = {
    	tag = GTE
    	NOT = { has_variable = getae_mission_cooldown }
    }

	abort = {
        ai_mission_back_out_trigger = yes
    }

	on_start = {
    	start_mission_ai_effect = yes
	    trigger_event = me_getae_01_inv.15
    }

    on_abort = {
        custom_tooltip = general_mission_cooldown_tt
        set_variable = {
            name = getae_mission_cooldown
            days = 7300
        }
    }
 
	on_completion = {
		add_2_free_province_investments = yes
        complete_mission_effect = yes
    }


	getae_mission_01_inv_1_task = { #Friends Or Foes?
		icon = task_diplomatic
		duration = 60

		highlight = {
			scope:province = {
                OR = {
                    is_in_area = scythia_area
                }
            }
	    }

		allow = {
			political_influence >= 15
        }
        	
		on_completion = {
            trigger_event = me_getae_01_inv.1
			add_political_influence = -15
			area:scythia_area = {
				add_provincial_claim_effect = yes
            }
        }
	}

	getae_mission_01_inv_2_task = { #The Carpian Connection
		icon = task_conquest

		requires = { getae_mission_01_inv_1_task }

		highlight = {
			scope:province = {
                OR = {
                    is_in_area = clepia_area
                }
            }
	    }

		bypass = {
			has_completed_mission_task = getae_mission_01_inv_5_task
		}

		allow = {
			manpower >= 8
			military_experience >= 10 
        }

		on_completion = {
			trigger_event = me_getae_01_inv.2
			area:clepia_area = {
				add_provincial_claim_effect = yes
            }
			add_country_modifier = {
				name = glorious_battle
				duration = 3650
			}
		}
	}

	getae_mission_01_inv_3_task = { #Restore the Nuraghe
		icon = task_diplomatic
		duration = 365

		allow = {
			treasury >= 40
			capital_scope.state = {
	                calc_true_if = {
	                    amount >= 1
	                    state_improvement_military_trigger = yes           
	                }
	            }
	        }
        

		on_completion = {
			trigger_event = me_getae_01_inv.3
			add_treasury = -40
		}
	}

	getae_mission_01_inv_4_task = { #The First City to Fall
		icon = task_conquest

        requires = { getae_mission_01_inv_3_task }

		allow = {
			owns = 3504
		}

		highlight = {
			scope:province = {
				OR = {
					province_id = 3504				
				}
			}
		}

		on_completion = {
			trigger_event = me_getae_01_inv.4
			add_centralization = 10
			add_1_free_province_investments = yes
			add_innovation = 1
		}
	}

	getae_mission_01_inv_5_task = { #Thracian Traders
		icon = task_economical

        requires = { getae_mission_01_inv_1_task }

		bypass = {
			has_completed_mission_task = getae_mission_01_inv_2_task
		}

		highlight = {
			scope:province = {
				OR = {
					province_id = 4519				
				}
			}
		}

		allow = {
			hidden:p:4519.owner = {
				opinion = { target = root value >= 0 }
			}
		}

		on_completion = {
			trigger_event = me_getae_01_inv.5
			add_country_modifier = {
				name = getae_halmyris_trade_modifier
				duration = -1
			}
		}
	}

	getae_mission_01_inv_6_task = { #Getian Galleys
		icon = task_expansion

        requires = { getae_mission_01_inv_5_task }

		allow = {
			p:4810 = {
				num_of_port_building >= 1 
			}
			num_of_ships >= 15 
		}

		highlight = {
			scope:province = {
				OR = {
					province_id = 4810				
				}
			}
		}

		on_completion = {
			trigger_event = me_getae_01_inv.6
			p:4810 = {
				add_permanent_province_modifier = {
					name = pirate_haven_modifier
					duration = -1
				}
			}
			add_country_modifier = {
				name = getian_buccaneers_mod
				duration = -1
			}
		}
	}

	getae_mission_01_inv_7_task = { #Conqueror Of The Coasts
		icon = task_artemis

        requires = { getae_mission_01_inv_8_task }

		bypass = {
			has_completed_mission_task = getae_mission_01_inv_5_task
		}

		highlight = {
			scope:province = {
				OR = {
					province_id = 4249
					province_id = 4248
					province_id = 4247
					province_id = 480
					province_id = 481
					province_id = 482
				}
			}
		}

		allow = {
			owns_or_subject_owns = 4249
			owns_or_subject_owns = 4248
			owns_or_subject_owns = 4247
			owns_or_subject_owns = 480
			owns_or_subject_owns = 481
			owns_or_subject_owns = 482
		}
	
		on_completion = {
			trigger_event = me_getae_01_inv.7
			current_ruler = {
				add_trait = conqueror
			}
			add_country_modifier = {
				name = we_will_succeed
				duration = 3650
			}
			area:haemimontus_area = {
				add_provincial_claim_effect = yes
            }
			area:europa_area = {
				add_provincial_claim_effect = yes
            }
		}
	}

	getae_mission_01_inv_8_task = { #Conquering The Coastline
		icon = task_battle

        requires = { getae_mission_01_inv_2_task }

		bypass = {
			has_completed_mission_task = getae_mission_01_inv_5_task
		}

		highlight = {
			scope:province = {
                OR = {
                    is_in_area = scythia_area
                }
            }
	    }

		allow = {
			owns_or_subject_owns_area = scythia_area
		}

		on_completion = {
			add_military_experience = 20
			add_treasury = 100
			create_unit = {
                navy = yes
                location = 4513
                add_subunit = trireme
                add_subunit = trireme
                add_subunit = trireme
                add_subunit = liburnian
				add_subunit = liburnian
				add_subunit = liburnian               
            }
			p:4249 = {
        		add_claim = ROOT
        	}
			p:4248 = {
        		add_claim = ROOT
        	}
			p:4247 = {
        		add_claim = ROOT
        	}
			p:480 = {
        		add_claim = ROOT
        	}
			p:481 = {
        		add_claim = ROOT
        	}
			p:482 = {
        		add_claim = ROOT
        	}
			trigger_event = me_getae_01_inv.8		
		}
	}

	getae_mission_01_inv_9_task = { #The Port of Sanaphar
		icon = task_happiness

        requires = { getae_mission_01_inv_3_task }

		allow = {
			owns = 3494 
		}

		highlight = {
			scope:province = {
				OR = {
					province_id = 3494				
				}
			}
		}

		on_completion = {
			trigger_event = me_getae_01_inv.9
			add_treasury = 100
		}
	}

	getae_mission_01_inv_10_task = { #Marching Towards Nura
		icon = task_battle

        requires = { getae_mission_01_inv_9_task }

		allow = {
			owns = 3483 # Nura
		}

		highlight = {
			scope:province = {
				OR = {
					province_id = 3483 # Nura				
				}
			}
		}

		on_completion = {
			add_innovation = 1
			trigger_event = me_getae_01_inv.10
		}
	}

	getae_mission_01_inv_11_task = { #The Farmlands of Karali
		icon = task_political

        requires = { getae_mission_01_inv_10_task }

		allow = {
        	p:3484 = {
        		owner = root
        		num_of_court_building >= 1
        		num_of_port_building >= 1
				num_of_commerce_building >= 1
				num_of_fortress_building >= 1
				num_of_workshop_building >= 1

        		trigger_if = {
        			limit = { has_construction = yes }
        			custom_tooltip = {
        				text = province_has_no_construction_tooltip
        				has_construction  = no
        			}
        		}
        	}
		}

		highlight = {
			scope:province = {
				OR = {
					province_id = 3484				
				}
			}
		}

		on_completion = {
			trigger_event = me_getae_01_inv.11
		}
	}

	getae_mission_01_inv_12_task = { #A New Capital
		icon = task_atlas
		final = yes

        requires = { getae_mission_01_inv_11_task getae_mission_01_inv_18_task }

		allow = {
			has_law = absolute_authority
			political_influence >= 30
			current_ruler = {
				popularity >= 90
			}
		}

		highlight = {
			scope:province = {
				OR = {
					province_id = 3484				
				}
			}
		}

		on_completion = {
			custom_tooltip = gymnaesian_mission_01_task_07_tt_a
			change_government = despotic_monarchy		
			switch_government_type_event_clearup_effect = yes
			hidden_effect = {
                current_ruler.family = {
                    save_scope_as = monarchy_family
                }
            }
			if = {
				limit = {
					exists = scope:monarchy_family
					scope:monarchy_family = {
						any_family_member = {
							is_adult = yes
							trigger_if = {
								limit = {
									root = {
										gender_equality = no
									}
								}
								is_male = yes
							}
							has_any_office = no
						}
					}
				}
				custom_tooltip = grant_offices_monarchy_reform_tt
				hidden_effect = {
					if = {
						limit = {
							scope:monarchy_family = {
								any_family_member = {
									is_adult = yes
									trigger_if = {
										limit = {
											root = {
												gender_equality = no
											}
										}
										is_male = yes
									}
									has_any_office = no
									is_general = no
									is_admiral = no
									is_governor = no
									has_tech_office = no
								}
							}
							office_is_empty = office_foreign_minister
						}
						scope:monarchy_family = {
							random_family_member = {
								limit = {
									is_adult = yes
									trigger_if = {
										limit = {
											root = {
												gender_equality = no
											}
										}
										is_male = yes
									}
									has_any_office = no
									is_general = no
									is_admiral = no
									is_governor = no
									has_tech_office = no
								}
								weight = {
									modifier = {
										factor = {
											value = 1
											add = charisma
										}
									}
								}
								give_office = office_foreign_minister
							}
						}
					}
					if = {
						limit = {
							scope:monarchy_family = {
								any_family_member = {
									is_adult = yes
									trigger_if = {
										limit = {
											root = {
												gender_equality = no
											}
										}
										is_male = yes
									}
									has_any_office = no
									is_general = no
									is_admiral = no
									is_governor = no
									has_tech_office = no
								}
							}
							office_is_empty = office_marshal
						}
						scope:monarchy_family = {
							random_family_member = {
								limit = {
									is_adult = yes
									trigger_if = {
										limit = {
											root = {
												gender_equality = no
											}
										}
										is_male = yes
									}
									has_any_office = no
									is_general = no
									is_admiral = no
									is_governor = no
									has_tech_office = no
								}
								weight = {
									modifier = {
										factor = {
											value = 1
											add = martial
										}
									}
								}
								give_office = office_marshal
							}
						}
					}
					if = {
						limit = {
							scope:monarchy_family = {
								any_family_member = {
									is_adult = yes
									trigger_if = {
										limit = {
											root = {
												gender_equality = no
											}
										}
										is_male = yes
									}
									has_any_office = no
									is_general = no
									is_admiral = no
									is_governor = no
									has_tech_office = no
								}
							}
							office_is_empty = office_high_priest_monarchy
						}
						scope:monarchy_family = {
							random_family_member = {
								limit = {
									is_adult = yes
									trigger_if = {
										limit = {
											root = {
												gender_equality = no
											}
										}
										is_male = yes
									}
									has_any_office = no
									is_general = no
									is_admiral = no
									is_governor = no
									has_tech_office = no
								}
								weight = {
									modifier = {
										factor = {
											value = 1
											add = zeal
										}
									}
								}
								give_office = office_high_priest_monarchy
							}
						}
					}
				}
			}
			trigger_event = me_getae_01_inv.12
			trigger_event = {
				id = me_getae_01_inv.19
				days = { 6 7 }
			}
			add_political_influence = -30
			add_2_free_province_investments = yes
		}
	}

	getae_mission_01_inv_13_task = { #Seize the Ships
		icon = task_expansion
		duration = 365
        requires = { getae_mission_01_inv_4_task }

		allow = {
			treasury >= 80
			political_influence >= 20
		}

		highlight = {
			scope:province = {
				OR = {
					province_id = 3504				
				}
			}
		}
		
		on_completion = {
			add_treasury = -80
			add_political_influence = -20
			trigger_event = me_getae_01_inv.13
			create_unit = {
                navy = yes
                location = 3504
                add_subunit = trireme
                add_subunit = trireme
                add_subunit = trireme
                add_subunit = liburnian
				add_subunit = liburnian
				add_subunit = liburnian               
            }
		}
	}

	getae_mission_01_inv_14_task = { #A Blind Eye to Piracy
		icon = task_economical

        requires = { getae_mission_01_inv_13_task }

		allow = {
        	treasury >= 150
			political_influence >= 30
			
        }

		highlight = {
			scope:province = {
				OR = {
					province_id = 3504 #Phausiane	
				}
			}
		}


		on_completion = {
			add_political_influence = -30
        	add_treasury = -150
			trigger_event = me_getae_01_inv.14
			p:3504 = {
				add_permanent_province_modifier = {
					name = pirate_haven_modifier
					duration = -1
				}
			}
		}
	}

	getae_mission_01_inv_16_task = { #The Old Cousins
		icon = task_artemis
		duration = 365

		requires = { getae_mission_01_inv_3_task }

		allow = {
			treasury >= 20
			political_influence >= 15
	    }
        
		highlight = {
			scope:province = {
				OR = {
					province_id = 1469				
				}
			}
		}

		on_completion = {
			trigger_event = me_getae_01_inv.16
			add_treasury = -20
			add_political_influence = -15
			area:balearides_area = {
                add_provincial_claim_effect = yes
			}
		}
	}

	getae_mission_01_inv_17_task = { #The Mines of Palma
		icon = task_economical
		duration = 365

		requires = { getae_mission_01_inv_16_task }

		allow = {
			owns = 1465
			hidden:p:1465 = {
				has_building = slave_mine_building
				total_population >= 10
			}
	    }
        
		highlight = {
			scope:province = {
				OR = {
					province_id = 1465				
				}
			}
		}

		on_completion = {
			trigger_event = me_getae_01_inv.17
			p:1465 = {
				add_permanent_province_modifier = {
					name = cradle_of_gold
					duration = -1
				}	
			}
		}
	}
	getae_mission_01_inv_18_task = { #Corsican Cities
		icon = task_calm
		duration = 365

		requires = { getae_mission_01_inv_17_task }

		allow = {
			owns = 3508
			owns = 3515
			political_influence >= 25
	    }
        
		highlight = {
			scope:province = {
				OR = {
					province_id = 3508
					province_id = 3515					
				}
			}
		}

		on_completion = {
			trigger_event = me_getae_01_inv.18
			add_political_influence = -25
			p:3508 = {
				if = {
					limit = { 
						has_city_status = no 
					}
					set_city_status = city
				}
			}
			add_country_modifier = {
                name = caledonian_cheaper_slaves_cost 
                duration = 3650
            }
		}
	}
	
    getae_mission_01_inv_19_task = { #Piephigiana On The Ister
		icon = task_apollo
		duration = 365

		requires = { getae_mission_01_inv_6_task }

		highlight = {
			scope:province = {
				OR = {
					province_id = 4810				
				}
			}
		}

		allow = {
			political_influence >= 30
            p:4810 = {
				total_population >= 15
				is_importing_trade_good = stone
			}
			p:4810.state = {
				calc_true_if = {
					amount >= 1   
					state_improvement_military_trigger = yes      
				}
			}
        }

		on_completion = {
			trigger_event = me_getae_01_inv.20
			p:4810 = {
                if = {
                    limit = {
                        has_city_status = no
                    }
                    set_city_status = city
                }
				add_province_modifier = {
					name = greek_getian_foreign_quarter_mod
					duration = -1
				}
			}
			p:4810 = {
				while = {
					count = 2
					define_pop = {
						type = citizen
						culture = bosporan
						religion = roman_pantheon
					}
					define_pop = {
						type = freemen
						culture = bosporan
						religion = roman_pantheon
					}
				}
			}
		}
	}
	
	getae_mission_01_inv_20_task = { #The Grain of Nurrensia
		icon = task_economical
		duration = 365

		requires = { getae_mission_01_inv_4_task }

		allow = {
			owns = 3496
			hidden:p:3496 = {
				has_building = basic_settlement_infratructure_building #Farming Settlement
				total_population >= 10
			}
			treasury >= 80
			political_influence >= 30
	    }
		
        on_start = {
        	add_political_influence = -30
        	add_treasury = -80
        }
        
		highlight = {
			scope:province = {
				OR = {
					province_id = 3496	
				}
			}
		}

		on_completion = {
			trigger_event = me_getae_01_inv.21
			p:3496 = {
				add_permanent_province_modifier = {
					name = sardinian_grain
					duration = -1
				}	
			}
		}
	}
}